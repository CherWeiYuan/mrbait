

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage options &mdash; mrbait 1.1.6 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'1.1.6',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Output Files" href="output.html" />
    <link rel="prev" title="Input files" href="files.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> mrbait
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="introduction.html">Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pipeline.html">Pipeline Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="files.html">Input files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Usage options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-parameters">Main Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general-options">General options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#input-options">Input Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#alignment-filtering-consensus-options-use-with-m-x-l">Alignment filtering/ consensus options (use with -M, -X, -L)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-bait-design-options">General Bait Design Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#target-region-options">Target Region Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bait-selection-options">Bait Selection Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-options">Output Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#filtering-using-vsearch">Filtering using vsearch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vsearch-options">vsearch Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#graph-based-conflict-resolution">Graph-based conflict resolution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#filtering-using-blast">Filtering using blast</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output.html">Output Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmarking.html">Benchmarking and Hardware Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipeline Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Input files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#main-parameters">Main Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-options">General options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#input-options">Input Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alignment-filtering-consensus-options-use-with-m-x-l">Alignment filtering/ consensus options (use with -M, -X, -L)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general-bait-design-options">General Bait Design Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#target-region-options">Target Region Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bait-selection-options">Bait Selection Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output-options">Output Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#filtering-using-vsearch">Filtering using vsearch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vsearch-options">vsearch Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graph-based-conflict-resolution">Graph-based conflict resolution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#filtering-using-blast">Filtering using blast</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Output Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarking.html">Benchmarking and Hardware Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mrbait</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="introduction.html">Introduction</a> &raquo;</li>
        
      <li>Usage options</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage-options">
<span id="usage"></span><h1>Usage options<a class="headerlink" href="#usage-options" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a> reads all options and inputs using command-line arguments provided
after the program name. For a quick look at all options from the command line,
call the help menu by typing <strong>mrbait -h</strong> from the terminal.</p>
<p>Note that options requiring a floating point number (e.g. <em>-q</em>) allow inputs
from 0.0 to 1.0, and options requiring an integer (e.g. <em>-c</em>) allow inputs ranging
from 1 to infinity.</p>
<div class="section" id="main-parameters">
<h2>Main Parameters<a class="headerlink" href="#main-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-options">
<h3>General options<a class="headerlink" href="#general-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-r</span>, <span class="option">--resume</span></kbd></td>
<td><p class="first"><strong>Resume</strong>: This flag is used to tell mrbait if you would like to resume work <br>
following a particular step. Use this option in conjunction with the <br>
<strong>&#8211;db</strong> flag to continue the pipeline if you would like to re-perform <br>
filtering steps without needing to re-load and parse alignments</p>
<p class="last">Usage: <br>
-r 1: Continue pipeline after Step 1 (loading alignments) <br>
-r 2: Continue fter Step 2 (target discovery) <br>
-r 3: Continue after Step 3 (target filtering) <br>
-r 4: Continue after Step 4 (bait discovery) <br>
For example, -r 4 will tell <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a> to re-do bait filtering and output</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--db</span></kbd></td>
<td><strong>Database</strong>: Use this with the &#8211;resume flag to specify a .sqlite <br>
database file from which to start the pipeline.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-T</span>, <span class="option">--threads</span></kbd></td>
<td><strong>Threads</strong>: Number of threads to use with processes that run <br>
in parallel. This will also be passed to <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> and/or <a class="reference external" href="https://blast.ncbi.nlm.nih.gov/Blast.cgi">blast</a> if those are <br>
being called. [default=1]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></td>
<td><strong>Help</strong>: Exit and display the help menu</td></tr>
</tbody>
</table>
</div>
<div class="section" id="input-options">
<h3>Input Options<a class="headerlink" href="#input-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-M</span>, <span class="option">--maf</span></kbd></td>
<td><strong>MAF input</strong>: Use this to provide the path to the multiple alignment MAF file</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-X</span>, <span class="option">--xmfa</span></kbd></td>
<td><strong>XMFA input</strong>: As an alternative to the MAF file, you can provide the <br>
.xmfa file output by the aligner Mauve.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-L</span>, <span class="option">--loci</span></kbd></td>
<td><strong>LOCI input</strong>: Multiple alignments can also be provided using the <br>
.loci file output by the RADseq assembly pipeline pyRAD.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-A</span>, <span class="option">--assembly</span></kbd></td>
<td><strong>FASTA input</strong>: Genome assembly provided as FASTA</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-V</span>, <span class="option">--vcf</span></kbd></td>
<td><strong>VCF input</strong>: For use with &#8211;assembly: VCF file containing variant data</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-G</span>, <span class="option">--gff</span></kbd></td>
<td><strong>GFF input</strong>: For use with &#8211;assembly: GFF file containing feature data</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--vcfALT</span></kbd></td>
<td><p class="first"><strong>REF calling with VCF</strong>: For use with &#8211;assembly and &#8211;vcf: This option  <br>
tells mrbait to attempt to override N/gap characters in the reference sequence  <br></p>
<blockquote class="last">
<div>using values from the ALT column in the VCF file. [default=off; boolean]</div></blockquote>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="alignment-filtering-consensus-options-use-with-m-x-l">
<h3>Alignment filtering/ consensus options (use with -M, -X, -L)<a class="headerlink" href="#alignment-filtering-consensus-options-use-with-m-x-l" title="Permalink to this headline">¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-c</span>, <span class="option">--cov</span></kbd></td>
<td><strong>Coverage</strong>: Minimum number of individuals/sequences per alignment, <br>
for MAF, XMFA, or LOCI inputs [default=1]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-l</span>, <span class="option">--len</span></kbd></td>
<td><strong>Minimum length</strong>: Minimum alignment length to attempt bait design [default=80]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-q</span>, <span class="option">--tresh</span></kbd></td>
<td><strong>Bad base threshold</strong>: Threshold proportion of gaps or N (ambiguous or <br>
poor quality) characters to over-ride the consensus base. For example, <em>-q 0.2</em> <br>
would be interpreted as 20% of bases at a nucleotide position must be an “N” <br>
or gap character in order for that character to be represented as the consensus <br>
base. [default=0.1]</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-Q</span>, <span class="option">--max_ambig</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><strong>Max bad bases</strong>: Maximum allowable proportion of gap/N characters <br>
allowed in a consensus sequence before it will be discarded. <em>-Q 0.5</em> means a <br>
consensus sequence can be 50% N’s or gap characters (“-“) before being dropped <br>
from consideration. [default=0.5]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-k</span>, <span class="option">--mask</span></kbd></td>
<td><strong>Mask threshold</strong>: Threshold proportion of masked characters per nucleotide <br>
column to mask the consensus base call. For use when case represents masking <br>
information (where lowercase = masked), as when using the <em>-xsmall</em> option in <br>
<a class="reference external" href="http://www.repeatmasker.org/">RepeatMasker</a> to flag low-complexity or repetitive sequences. <br>
Case will be retained in the consensus on a per-base basis according to this threshold. <br>
[default=0.1]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-K</span>, <span class="option">--max_mask</span></kbd></td>
<td><p class="first"><strong>Max masked bases</strong>: Maximum allowable proportion of masked characters <br>
allowed in a consensus sequence before it will be discarded. <em>-K 0.5</em> means a <br>
consensus sequence can be 50% masked (lowercase) before being <br>
dropped from consideration.[default=0.5].</p>
<p class="last">If lowercase bases do not contain masking information, set to <em>-K 1.0</em></p>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="general-bait-design-options">
<h3>General Bait Design Options<a class="headerlink" href="#general-bait-design-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-b</span>, <span class="option">--bait</span></kbd></td>
<td><strong>Bait length</strong>: This is the length of desired baits, and will be used for <br>
bait design as well as the sliding window width for target region <br>
discovery [default=80]</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-w</span>, <span class="option">--win_shift</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><strong>Sliding window shift distance</strong>: Shift distance for sliding window used <br>
to discover target regions. Generally, there should not be a reason to <br>
alter this. If target discovery (step 2) is taking a very long time, adjusting <br>
this may make it faster although it could result in more targets failing <br>
filtering [default=1]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-v</span>, <span class="option">--var_max</span></kbd></td>
<td><strong>Maximum SNPs per bait</strong>: Maximum allowable variants allowed in a bait <br>
sequence. These can be expanded in the final output as each possible <br>
non-ambiguous bait sequence for synthesis. Use this when there are not enough <br>
conserved regions to capture enough loci for your design. [default=0]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-n</span>, <span class="option">--numN</span></kbd></td>
<td><strong>Maximum Ns per bait</strong>: Maximum allowable ambiguous (N) bases allowed <br>
per bait. This could be increased when there are too many poor quality bases <br>
in your alignment to design a sufficient number of probes, although keep in mind <br>
this will affect the specificity of your resulting probes. [default=0]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-g</span>, <span class="option">--numG</span></kbd></td>
<td><strong>Maximum gaps per bait</strong>: Maximum allowable gap characters allowed per bait. <br>
If dealing with alignments containing many indels, it might be desirable to <br>
allow a small number per bait sequence. These can be expanded in the final <br>
output using the -x,&#8211;expand option, which will expand gap characters as <br>
A, G, T, C, and absent. [default=0]</td></tr>
</tbody>
</table>
</div>
<div class="section" id="target-region-options">
<h3>Target Region Options<a class="headerlink" href="#target-region-options" title="Permalink to this headline">¶</a></h3>
<p>These are options primarily used to control which <strong>target regions</strong>, or regions
which could be enriched (e.g. conserved enough to design baits) will be used to
design the final set of bait sequences. Targets will be either <em>passed</em> or <em>failed</em>
depending on these criteria.</p>
<p>For example, you can constrain targets to fail if they are below 200 bases in length, or
above 5000 based in length by specifying <em>-F len=200,5000</em>. In this case, all targets
with total lengths outside of this range will fail, and be excluded from bait design.</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-R</span>, <span class="option">--mult_reg</span></kbd></td>
<td><strong>Multiple targets per locus</strong>: By default, <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a> only chooses one target <br>
region (e.g. conserved region for which baits could be designed) per locus/ <br>
alignment. When multiple are discovered, they are ranked according to the <br>
criterion selected with the <em>-S,&#8211;select_r</em> option. When <em>-R,&#8211;mult_reg</em> not <br>
in use, only a single target region (and corresponding baits) is chosen per <br>
alignment. [default=false]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-m</span>, <span class="option">--min_mult</span></kbd></td>
<td><strong>Minimum length for multiple targets</strong>: Specify this to set a minimum alignment <br>
or locus length to allow multiple target regions to be selected. By default will <br>
be set to the value of <em>-l,&#8211;len</em> (thus, when <em>-R,&#8211;mult_reg</em> is used, all loci <br>
passing length filter will be allowed multiple targets).</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-D</span>, <span class="option">--dist_r</span></kbd></td>
<td><strong>Distance between targets</strong>: When <em>-R,&#8211;mult_reg</em> is in use, use this parameter <br>
to specify the minimum distance between targets. When targets are in conflict <br>
(e.g. they are less than <em>-D,&#8211;dist_r</em> bases apart), conflicts will be resolved <br>
using the criterion set with <em>-S,&#8211;select_r</em>. [default=100]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--target_all</span></kbd></td>
<td><strong>Use all loci as targets</strong>: This option tells mrbait to use all <em>passing</em> loci <br>
as target regions for bait design. Note that all target filtering options will <br>
still be in effect. Use this option if your input loci are already curated, and <br>
you simply want to design baits for them [default=False]</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d</span>, <span class="option">--flank_dist</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><strong>Flanking distance for target filtering</strong>: Distance from boundaries of target <br>
region to parse for counting SNPs, ambiguities, gaps, etc when filtering <br>
target regions (see <em>-S,&#8211;select_r</em> and <em>-F,&#8211;filter_r</em>) [default=500]. <br>
Note that this value will tell <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a> to search ‘<em>d</em>’ bases to the left AND <br>
right of each target region. <br>
Note that currently, the same <em>&#8211;flank_dist</em> value will be used for all filters.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-S</span>, <span class="option">--select_r</span></kbd></td>
<td><p class="first"><strong>Target selection criterion</strong>: Method to resolve conflicts when targets are <br>
too close together (e.g. when <em>-R</em> and <em>-D</em>), or when only choosing one target <br>
per locus/alignment.</p>
<p>Usage:
<em>-S snp</em>: Select target with most SNPs within <em>d</em> bases <br>
<em>-S bad</em>: Select target with least gaps/Ns within <em>d</em> bases <br>
<em>-S cons</em>: Select target with least SNPs within <em>d</em> bases <br>
<em>-S rand</em>: Randomly select a target [default] <br></p>
<p class="last">Example: <em>-d 100 -S snp</em> to choose region with most SNPs within <br>
100 flanking bases</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-F</span>, <span class="option">--filter_r</span></kbd></td>
<td><p class="first"><strong>Target filtering criteria</strong>: Method(s) used to filter all target regions. <br>
Can be specified any number of times to use additional filtering criteria. <br></p>
<p>Usage: <br>
<em>-F len=[x,y]</em>:  Length between <em>x</em> (min) and <em>y</em> (max) <br>
<em>-F gap=[x]</em>:  Maximum of <em>x</em> indels in target region <br>
<em>-F bad=[x]</em>:  Maximum of <em>x</em> N characters in target region <br>
<em>-F snp=[x,y]</em>:  Between <em>x</em> (min) and <em>y</em> (max) SNPs w/in <em>d</em> <br>
<em>-F mask=[x]</em>:  Maximum of <em>x</em> N characters in target region <br>
<em>-F gc=[x,y]</em>:  G/C propotion between <em>x</em> (min) and <em>y</em> (max) <br>
<em>-F rand=[x]</em>:  Randomly retain <em>x</em> targets <br>
<em>-F pw=[i,q]</em>:  Pairwise alignment, removing when <em>i</em> percent identity over at least <em>q</em> proportion of the sequences <br>
<em>-F blast_i=[i,q]</em>:  Only retain BLAST hits with <em>i</em> percent identity over at least <em>q</em> query coverage <br>
<em>-F blast_i=[i,q]</em>:  Exclude BLAST hits with <em>i</em> percent identity over at least <em>q</em> query coverage <br>
<em>-F gff=[type]</em>:  Only retain targets within <em>d</em> bases of a GFF-annotated feature of type type. Only for use when <em>-A</em> and <em>-G</em> inputs provided. Use <em>-F gff=all</em> to target any type of annotated feature. <br>
<em>-F gff_a=[alias]</em>:  Only retain targets within <em>d</em> bases of a GFF-annotated feature of tagged with the Alias attribute matching alias. Only for use when <em>-A</em> and <em>-G</em> inputs provided. <br></p>
<p class="last">Examples: <br>
<em>-F snp=1,10 -d 100</em> to sample when 1-10 SNPs within 100 bases <br>
<em>-F gc=0.2,0.8 -F rand=100</em> to keep 100 random targets w/ 20-80% GC <br>
<em>-F mask=0.1</em> to remove targets with &gt;10% masked bases <br>
<em>-d 1000 -F gff=exon</em> to keep targets within 100 bases of an exon <br></p>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="bait-selection-options">
<h3>Bait Selection Options<a class="headerlink" href="#bait-selection-options" title="Permalink to this headline">¶</a></h3>
<p>These options are used to specify how baits will be designed in passing target
regions (<em>-s, &#8211;select_b</em>) and how designed baits will be curated to create
the final set of sequences for synthesis (<em>-f, &#8211;filter_b</em>).</p>
<p>The default behavior is to tile baits across all <em>passing</em> target regions, with
an overlap of 50%. This corresponds to ~2X coverage across the target region. Only
passing baits will be included in the final output FASTA file.</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-s</span>, <span class="option">--select_b</span></kbd></td>
<td><p class="first"><strong>Bait selection scheme</strong>: Use this to specify the desired method <br>
to design baits from passing target regions.</p>
<p class="last">Usage: <br>
<em>-s tile=[x]</em>: Tile baits over whole region, with <em>x</em> overlap <br>
<em>-s center=[n,x]</em>: <em>n</em> centered baits with <em>x</em> overlap <br>
<em>-s calc=[n,x]</em>: Design <em>n</em> baits per target with <em>x</em> maximum overlap <br>
<em>-s flank=[n,x]</em>: <em>n</em> terminal baits (each end) with <em>x</em> overlap
Default behavior is to tile baits across all targets with 50% overlap</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-f</span>, <span class="option">--filter_b</span></kbd></td>
<td><p class="first"><strong>Bait filtering criteria</strong>: Method(s) used to filter baits. <br>
Can be specified any number of times to use additional filtering criteria.</p>
<p class="last">Usage: <br>
<em>-f mask=[x]</em>:  Maximum of <em>x</em> N characters in target region
<em>-f gc=[x,y]</em>:  G/C propotion between <em>x</em> (min) and <em>y</em> (max)
<em>-f rand=[x]</em>:  Randomly retain <em>x</em> targets
<em>-f pw=[i,q]</em>:  Pairwise alignment, removing when <em>i</em> percent identity over at least <em>q</em> proportion of the sequences <br>
<em>-f rc=[i,q]</em>:  Pairwise align reverse complements, where i and q are as in -f pw <br>
<em>-f blast_i=[i,q]</em>:  Only retain BLAST hits with <em>i</em> percent identity over at least <em>q</em> query coverage <br>
<em>-f blast_i=[i,q]</em>:  Exclude BLAST hits with <em>i</em> percent identity over at least <em>q</em> query coverage</p>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="output-options">
<h3>Output Options<a class="headerlink" href="#output-options" title="Permalink to this headline">¶</a></h3>
<p>Use these options to control the format of your output file, or to specify non-default
output files.</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-x</span>, <span class="option">--expand</span></kbd></td>
<td><strong>Bait format</strong>: Boolean. Use this flag if you want any ambiguities <br>
in bait sequences to be expanded (e.g. N = A,G,C,T). IUPAC codes will be fully <br>
expanded, and gap characters will be expanded as all nucleotides and as <br>
absent. Bait sequences will be output as FASTA to $out_baits.fasta</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-t</span>, <span class="option">--print_tr</span></kbd></td>
<td><strong>Print target regions</strong>: Boolean. Use this flag if you would <br>
like target regions to be printed to a FASTA file. FASTA headers will reflect <br>
locus number, target number within locus, and pass=T or pass=F indicating if the <br>
target passed or failed filtering specified using the <em>-F,&#8211;filter_r</em> options, as|br|
well as any targets which were excluded due to -S,&#8211;select_r criteria. Output file <br>
will be named as $out_targets.fasta.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--print_loc</span></kbd></td>
<td><strong>Print locus cataog</strong>: Boolean. Prints consensus loci, formatted as in <em>&#8211;print_tr</em></td></tr>
<tr><td class="option-group">
<kbd><span class="option">--strand</span></kbd></td>
<td><strong>Output strand</strong>: Use this if you want to print baits as-designed, or as <br>
reverse complement. Possible values: “+” [default], “-” (reverse-complement), <br>
or “both”.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o</span>, <span class="option">--out</span></kbd></td>
<td><strong>Output prefix</strong>: Desired prefix for output files. Default is “out”.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="filtering-using-vsearch">
<h2>Filtering using <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a><a class="headerlink" href="#filtering-using-vsearch" title="Permalink to this headline">¶</a></h2>
<p>Using the &#8211;filter_r or &#8211;filter_b ‘pw’ (for pairwise-align) options call an external open-source
package <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a>. Internally, this is accomplished using the “<em>allpairs_global</em>” function in
<a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a>, which performs all-vs-all global alignments of target or bait sequences.
<a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a> then parses the output of <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> to find pairs of sequences with greater
than <em>i</em> percent identity over at least <em>q</em> percent of the query sequence.
Sequences are first sorted by length, meaning the <em>q</em> proportion should be measured
by the shorter of the two sequences in each pairwise alignment (although when called
with the <em>&#8211;filter_b</em> command, all pairs are of equal length). Because all sequences
will be compared in a pairwise fashion, keep in mind that this step could take
considerable time, although VSEARCH is exceptionally efficient and does take advantage
of multiple cores for parallel computation (passed using the &#8211;threads argument).</p>
<p>If you did NOT install <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> using the <a class="reference external" href="http://docs.continuum.io/conda/">conda</a> installation instructions for <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a>,
you may need to point <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a> to the <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> executable. You can specify this path, as
well asspecify how mrbait parses the results of vsearch using the following parameters:</p>
<div class="section" id="vsearch-options">
<h3><a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> Options<a class="headerlink" href="#vsearch-options" title="Permalink to this headline">¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--vsearch</span></kbd></td>
<td><strong>VSEARCH binary</strong>: Path to <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> binary. If installed via <a class="reference external" href="http://docs.continuum.io/conda/">conda</a> <br>
install, the bioconda recipe will be used, and placed into the bin/ folder for <br>
your <a class="reference external" href="http://docs.continuum.io/conda/">conda</a> installation. <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a>, by default, assumes that the <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> executable <br>
is locatable in your $PATH as “vsearch”. If this is not the case, provide an <br>
alternate path using this flag.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--vthreads</span></kbd></td>
<td><strong>VSEARCH threads</strong>: Number of threads to use for <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a>. By default, <br>
this is assumed to be the same value as the <em>&#8211;threads</em> argument passed to <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a></td></tr>
<tr><td class="option-group">
<kbd><span class="option">--noGraph</span></kbd></td>
<td><strong>No conflict graph</strong>: By default, mrbait will try to recover as many <br>
sequences as possible from the pairwise alignment results by using a graph <br>
structure (see below) to remove only enough sequences to resolve all conflicts</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--noWeightGraph</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><strong>Unweighted conflict resolution</strong>: By default, mrbait weights all <br>
nodes by the number of SNPs that the corresponding target or bait captures. <br>
Use this option to turn this off, and instead use the built-in maximal_independent_set <br>
function from the <a class="reference external" href="https://networkx.github.io/">networkx</a> package.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--weightByMin</span></kbd></td>
<td><strong>Weight by minimum ambiguity</strong>: Instead of trying to keep sequences <br>
with the most flanking SNPs, this option tries to keep sequences with the fewest <br>
gap or N characters in flanking sequences.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--weightMax</span></kbd></td>
<td><strong>Maximum size to attempt weighting</strong>: Maximum graph size to attempt <br>
weighted algorithm for finding maximal independent set. Graphs larger than this <br>
size will use the maximal_independent_set function from the <a class="reference external" href="https://networkx.github.io/">networkx</a> package, <br>
which is slightly faster.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="graph-based-conflict-resolution">
<h3>Graph-based conflict resolution<a class="headerlink" href="#graph-based-conflict-resolution" title="Permalink to this headline">¶</a></h3>
<p>After <a class="reference external" href="https://github.com/torognes/vsearch">vsearch</a> is complete, mrbait will parse the output and represent all ‘conflicting’
sequences (e.g. those which aligned with i or greater identity and q or greater query
coverage) as a graph structure, with nodes as the primary key (ID) for the SQLite
entry corresponding to each sequence, and edges unweighted and representing ‘conflicts’
from the pairwise alignment. By default, mrbait uses this graph structure to attempt to
rescue as many sequences as possible which failed the pairwise alignment filter by using
an algorithm to find the most sequences which can be “kept” while removing all edges (conflicts)
from the graph (e.g. see Figure 2 below).</p>
<p>This is accomplished by searching through all edges, removing the node (target or bait)
which captures the least flanking SNPs in the original alignments, or if this value is
equal by removing the node with the most neighbors (=conflicting sequences). If both
quantities are equal, one is chosen at random. Options are provided to turn off this
behavior altogether, or to weight nodes according to how many gap/N characters flank
them, or to alternatively use the maximal_independent_set function from the <a class="reference external" href="https://networkx.github.io/">networkx</a>
package. Unfortunately, finding the maximal independent set of a graph (i.e. the
maximum number of nodes to retain while removing all edges) is an extremely hard problem,
and cannot be done in a particularly efficient manner. Thus, with very large sets of target
sequences, this can take quite a while if there is a lot of highly matching alignments
among them.</p>
<img alt="_images/graph.png" src="_images/graph.png" />
<p>Figure 2: Example maximal independent set (plotted using the matplotlib for Python!)
where nodes in red are those which have been kept by the algorithm. Black nodes represent
sequences which would be deleted (e.g. baits which fail the ‘pw’ filter). Although
red nodes may be indirectly connected by black ‘failed’ nodes (i.e. by multiple edges),
no direct edges remain in the graph after removing failed nodes.</p>
</div>
</div>
<div class="section" id="filtering-using-blast">
<h2>Filtering using <a class="reference external" href="https://blast.ncbi.nlm.nih.gov/Blast.cgi">blast</a><a class="headerlink" href="#filtering-using-blast" title="Permalink to this headline">¶</a></h2>
<p>The NCBI-BLAST+ package (<a class="reference external" href="https://blast.ncbi.nlm.nih.gov/Blast.cgi">https://blast.ncbi.nlm.nih.gov/Blast.cgi</a>) can also be called
using a similar scheme of setting a threshold of <em>i</em> sequence identity of hits, and <em>q</em>
query coverage. Currently, mrbait supports blastn filtering using these cutoff values
to either exclude (<em>blast_x</em>) or include (<em>blast_i</em>) sequences based on presence of hits.</p>
<p>Usage of the ‘<em>blast_x</em>’ option for either target (<em>&#8211;filter_r</em>) or bait (<em>&#8211;filter_b</em>)
filtering would most generally be used to prevent non-target matches to potential
contaminant DNA, given a representative genome for the putative non-target organism
(for example a common bacterial contaminant). If such a reference genome is lacking,
you can also increase specificity of chosen targets or baits using the ‘<em>blast_i</em>’
option, which only retains queries with hits to a specified genome.</p>
<p>When using either ‘<em>blast_x</em>’ or ‘<em>blast_i</em>’ options for filtering, a database file must
be specified either as a pre-built BLAST-formatted database using the <em>&#8211;blastdb</em> flag,
or alternatively as a FASTA file using <em>&#8211;fastadb</em>. In the latter case, mrbait will
call the NCBI MakeBlastDB executable. When using the <a class="reference external" href="http://docs.continuum.io/conda/">conda</a> install, this is included
with all other BLAST+ binaries (including the blastn executable also required by
mrbait for BLAST filtering). If not using the conda installation instructions,
these are both assumed to be accessible in your $PATH as ‘<em>blastn</em>’ and ‘<em>makeblastdb</em>’.</p>
<p>Please note that with particularly large sets of query sequences, this process may
take a while, although it does take advantage of multithreading if passed via the
<em>&#8211;threads</em> argument.</p>
<p>BLAST options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--blastn</span></kbd></td>
<td><strong>BLASTN binary</strong>: Path to blastn binary. If installed via <a class="reference external" href="http://docs.continuum.io/conda/">conda</a> <br>
install, the bioconda recipe will be used, and placed into the bin/ folder <br>
for your <a class="reference external" href="http://docs.continuum.io/conda/">conda</a> installation. <a class="reference external" href="https://github.com/tkchafin/mrbait">mrbait</a>, by default, assumes that the <br>
blastn executable is locatable in your $PATH as “blastn”. If this is not <br>
the case, provide an alternate path using this flag.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--makedb</span></kbd></td>
<td><strong>MakeBlastDB binary</strong>: Path to makeblastdb binary. If installed via <br>
<a class="reference external" href="http://docs.continuum.io/conda/">conda</a> install, the bioconda recipe will be used, and placed into the bin/ <br>
folder for your conda installation. Mrbait, by default, assumes that the <br>
makeblastdb executable is locatable in your $PATH as “makeblastdb”. If this <br>
is not the case, provide an alternate path using this flag.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--blastdb</span></kbd></td>
<td><strong>Path to BLAST database</strong>: Full path to formatted database to search against</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fastadb</span></kbd></td>
<td><strong>Path to FASTA database</strong>: If database is provided as a FASTA file, <br>
and requires building using the makeblastdb command, provide that path here.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--e_value</span></kbd></td>
<td><strong>E-value threshold</strong>: Minimum e-value cutoff to report BLAST hits <br>
[default=0.000001]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--gapopen</span></kbd></td>
<td><strong>Gap opening penalty</strong>: Penalty for opening gaps when performing <br>
alignment [default=5]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--gapextend</span></kbd></td>
<td><strong>Gap extension penalty</strong>: Penalty for extending gaps when <br>
performing alignment [default=2]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--word_size</span></kbd></td>
<td><strong>Word size</strong>: Word size [default=11]</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nodust</span></kbd></td>
<td><strong>Turn off dusting</strong>: Use this flag to turn off the low-complexity <br>
filter using by blastn. Depending on what your goals are for BLAST filtering, <br>
this may be necessary. Boolean.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--megablast</span></kbd></td>
<td><strong>Use megablast</strong>: Use this flag to switch to the <em>megablast</em> <br>
algorithm. It is recommended you use this if you are trying to exclusively find <br>
nearly identical alignments to a very closely related genome.</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="output.html" class="btn btn-neutral float-right" title="Output Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="files.html" class="btn btn-neutral float-left" title="Input files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Tyler K. Chafin

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>